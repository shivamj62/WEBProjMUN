(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{8967:function(e,a,t){Promise.resolve().then(t.bind(t,2984))},2984:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return eS}});var s=t(7437),r=t(4512),l=t(2265),d=t(3216),n=t(7660),o=t(8243);let i=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:a,className:(0,o.cn)("w-full caption-bottom text-sm",t),...r})})});i.displayName="Table";let c=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("thead",{ref:a,className:(0,o.cn)("[&_tr]:border-b",t),...r})});c.displayName="TableHeader";let m=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("tbody",{ref:a,className:(0,o.cn)("[&_tr:last-child]:border-0",t),...r})});m.displayName="TableBody",l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("tfoot",{ref:a,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r})}).displayName="TableFooter";let x=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("tr",{ref:a,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r})});x.displayName="TableRow";let u=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("th",{ref:a,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r})});u.displayName="TableHead";let h=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("td",{ref:a,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r})});h.displayName="TableCell",l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("caption",{ref:a,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",t),...r})}).displayName="TableCaption";var g=t(7256),f=t(6061);let p=(0,f.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),b=l.forwardRef((e,a)=>{let{className:t,variant:r,size:l,asChild:d=!1,...n}=e,i=d?g.g7:"button";return(0,s.jsx)(i,{className:(0,o.cn)(p({variant:r,size:l,className:t})),ref:a,...n})});b.displayName="Button";let y=l.forwardRef((e,a)=>{let{className:t,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...l})});y.displayName="Input";var N=t(4527),j=t(1827),w=t(4280),v=t(6264),k=t(3452),C=t(9407),R=t(7216),S=t(9670),E=t(7472),M=t(9617),z=t(1138),D=t(8883),F=t(7158),Z=t(2442),_=t(6369);let P=D.fC,A=D.xz;D.ZA,D.Uv,D.Tr,D.Ee,l.forwardRef((e,a)=>{let{className:t,inset:r,children:l,...d}=e;return(0,s.jsxs)(D.fF,{ref:a,className:(0,o.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",t),...d,children:[l,(0,s.jsx)(F.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=D.fF.displayName,l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(D.tu,{ref:a,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}).displayName=D.tu.displayName;let V=l.forwardRef((e,a)=>{let{className:t,sideOffset:r=4,...l}=e;return(0,s.jsx)(D.Uv,{children:(0,s.jsx)(D.VY,{ref:a,sideOffset:r,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})})});V.displayName=D.VY.displayName;let T=l.forwardRef((e,a)=>{let{className:t,inset:r,...l}=e;return(0,s.jsx)(D.ck,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",t),...l})});T.displayName=D.ck.displayName,l.forwardRef((e,a)=>{let{className:t,children:r,checked:l,...d}=e;return(0,s.jsxs)(D.oC,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:l,...d,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(D.wU,{children:(0,s.jsx)(Z.Z,{className:"h-4 w-4"})})}),r]})}).displayName=D.oC.displayName,l.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(D.Rk,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(D.wU,{children:(0,s.jsx)(_.Z,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=D.Rk.displayName;let O=l.forwardRef((e,a)=>{let{className:t,inset:r,...l}=e;return(0,s.jsx)(D.__,{ref:a,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...l})});O.displayName=D.__.displayName;let I=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(D.Z0,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",t),...r})});I.displayName=D.Z0.displayName;let U=e=>{let{password:a}=e,[t,r]=(0,l.useState)(!1);return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-gray-300 font-mono text-sm",children:t?a:"••••••••"}),(0,s.jsx)(b,{variant:"ghost",size:"sm",onClick:()=>r(!t),className:"h-6 w-6 p-0 text-gray-400 hover:text-white",children:t?(0,s.jsx)(R.Z,{className:"h-3 w-3"}):(0,s.jsx)(S.Z,{className:"h-3 w-3"})})]})},Y=(e,a)=>[{accessorKey:"email",header:"Email",cell:e=>{let{row:a}=e;return(0,s.jsx)("div",{className:"font-medium text-white",children:a.getValue("email")})}},{accessorKey:"name",header:"Name",cell:e=>{let{row:a}=e;return(0,s.jsx)("div",{className:"text-gray-300",children:a.getValue("name")})}},{accessorKey:"role",header:"Role",cell:e=>{let{row:a}=e,t=a.getValue("role");return(0,s.jsx)("div",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("admin"===t?"bg-red-900/50 text-red-300 border border-red-800":"bg-blue-900/50 text-blue-300 border border-blue-800"),children:t.charAt(0).toUpperCase()+t.slice(1)})}},{accessorKey:"password",header:"Password",cell:e=>{let{row:a}=e;return(0,s.jsx)(U,{password:a.original.password||"No password set"})}},{accessorKey:"created_at",header:"Created",cell:e=>{let{row:a}=e,t=new Date(a.getValue("created_at"));return(0,s.jsx)("div",{className:"text-gray-300 text-sm",children:t.toLocaleDateString()})}},{id:"actions",header:"Actions",cell:t=>{let{row:r}=t,l=r.original;return(0,s.jsxs)(P,{children:[(0,s.jsx)(A,{asChild:!0,children:(0,s.jsxs)(b,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,s.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,s.jsx)(E.Z,{className:"h-4 w-4"})]})}),(0,s.jsxs)(V,{align:"end",className:"bg-gray-900 border-gray-700",children:[(0,s.jsx)(O,{className:"text-gray-300",children:"Actions"}),(0,s.jsx)(I,{className:"bg-gray-700"}),(0,s.jsxs)(T,{onClick:()=>e(l),className:"text-gray-300 hover:bg-gray-800 hover:text-white cursor-pointer",children:[(0,s.jsx)(M.Z,{className:"mr-2 h-4 w-4"}),"Edit member"]}),(0,s.jsxs)(T,{onClick:()=>a(l),className:"text-red-400 hover:bg-red-900/50 hover:text-red-300 cursor-pointer",children:[(0,s.jsx)(z.Z,{className:"mr-2 h-4 w-4"}),"Delete member"]})]})]})}}];var q=t(8712),L=t(2549);let B=q.fC;q.xz;let $=q.h_;q.x8;let G=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(q.aV,{ref:a,className:(0,o.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});G.displayName=q.aV.displayName;let H=l.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)($,{children:[(0,s.jsx)(G,{}),(0,s.jsxs)(q.VY,{ref:a,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...l,children:[r,(0,s.jsxs)(q.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(L.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});H.displayName=q.VY.displayName;let K=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};K.displayName="DialogHeader";let J=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};J.displayName="DialogFooter";let W=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(q.Dx,{ref:a,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});W.displayName=q.Dx.displayName;let Q=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(q.dk,{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",t),...r})});Q.displayName=q.dk.displayName;var X=t(6743);let ee=(0,f.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ea=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(X.f,{ref:a,className:(0,o.cn)(ee(),t),...r})});ea.displayName=X.f.displayName;var et=t(3425),es=t(3523),er=t(9224);let el=et.fC;et.ZA;let ed=et.B4,en=l.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(et.xz,{ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[r,(0,s.jsx)(et.JO,{asChild:!0,children:(0,s.jsx)(es.Z,{className:"h-4 w-4 opacity-50"})})]})});en.displayName=et.xz.displayName;let eo=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(et.u_,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(er.Z,{className:"h-4 w-4"})})});eo.displayName=et.u_.displayName;let ei=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(et.$G,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(es.Z,{className:"h-4 w-4"})})});ei.displayName=et.$G.displayName;let ec=l.forwardRef((e,a)=>{let{className:t,children:r,position:l="popper",...d}=e;return(0,s.jsx)(et.h_,{children:(0,s.jsxs)(et.VY,{ref:a,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...d,children:[(0,s.jsx)(eo,{}),(0,s.jsx)(et.l_,{className:(0,o.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(ei,{})]})})});ec.displayName=et.VY.displayName,l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(et.__,{ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=et.__.displayName;let em=l.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(et.ck,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(et.wU,{children:(0,s.jsx)(Z.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(et.eT,{children:r})]})});function ex(e){let{member:a,isOpen:t,onClose:r,onSave:d}=e,[n,o]=(0,l.useState)({email:(null==a?void 0:a.email)||"",name:(null==a?void 0:a.name)||"",role:(null==a?void 0:a.role)||"member",password:""}),[i,c]=(0,l.useState)(!1),[m,x]=(0,l.useState)({}),u=()=>{let e={};return n.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(e.email="Please enter a valid email address"):e.email="Email is required",n.name?n.name.length<2&&(e.name="Name must be at least 2 characters long"):e.name="Name is required",n.role||(e.role="Role is required"),x(e),0===Object.keys(e).length},h=async e=>{if(e.preventDefault(),u()){c(!0);try{let e={email:n.email,name:n.name,role:n.role};n.password.trim()&&(e.password=n.password),await d(a.id,e),r()}catch(e){console.error("Failed to update member:",e),x({submit:e.message||"Failed to update member. Please try again."})}finally{c(!1)}}},g=(e,a)=>{o(t=>({...t,[e]:a})),m[e]&&x(a=>({...a,[e]:""}))};return(0,l.useState)(()=>{a&&(o({email:a.email||"",name:a.name||"",role:a.role||"member",password:""}),x({}))},[a]),(0,s.jsx)(B,{open:t,onOpenChange:r,children:(0,s.jsxs)(H,{className:"sm:max-w-[425px] bg-gray-900 border-gray-700",children:[(0,s.jsxs)(K,{children:[(0,s.jsx)(W,{className:"text-white",children:"Edit Member"}),(0,s.jsx)(Q,{className:"text-gray-400",children:"Make changes to the member's profile. Click save when you're done."})]}),(0,s.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(ea,{htmlFor:"email",className:"text-gray-300",children:"Email"}),(0,s.jsx)(y,{id:"email",type:"email",value:n.email,onChange:e=>g("email",e.target.value),className:"bg-gray-800 border-gray-600 text-white placeholder:text-gray-400",placeholder:"member@example.com"}),m.email&&(0,s.jsx)("p",{className:"text-red-400 text-sm",children:m.email})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(ea,{htmlFor:"name",className:"text-gray-300",children:"Name"}),(0,s.jsx)(y,{id:"name",type:"text",value:n.name,onChange:e=>g("name",e.target.value),className:"bg-gray-800 border-gray-600 text-white placeholder:text-gray-400",placeholder:"John Doe"}),m.name&&(0,s.jsx)("p",{className:"text-red-400 text-sm",children:m.name})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(ea,{htmlFor:"role",className:"text-gray-300",children:"Role"}),(0,s.jsxs)(el,{value:n.role,onValueChange:e=>g("role",e),children:[(0,s.jsx)(en,{className:"bg-gray-800 border-gray-600 text-white",children:(0,s.jsx)(ed,{placeholder:"Select a role"})}),(0,s.jsxs)(ec,{className:"bg-gray-800 border-gray-600",children:[(0,s.jsx)(em,{value:"member",className:"text-white hover:bg-gray-700",children:"Member"}),(0,s.jsx)(em,{value:"admin",className:"text-white hover:bg-gray-700",children:"Admin"})]})]}),m.role&&(0,s.jsx)("p",{className:"text-red-400 text-sm",children:m.role})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(ea,{htmlFor:"password",className:"text-gray-300",children:["Password",(0,s.jsx)("span",{className:"text-gray-500 text-sm ml-1",children:"(leave blank to keep current)"})]}),(0,s.jsx)(y,{id:"password",type:"password",value:n.password,onChange:e=>g("password",e.target.value),className:"bg-gray-800 border-gray-600 text-white placeholder:text-gray-400",placeholder:"Enter new password"}),m.password&&(0,s.jsx)("p",{className:"text-red-400 text-sm",children:m.password})]}),m.submit&&(0,s.jsx)("div",{className:"text-red-400 text-sm bg-red-900/20 p-3 rounded border border-red-800",children:m.submit}),(0,s.jsxs)(J,{children:[(0,s.jsx)(b,{type:"button",variant:"ghost",onClick:r,className:"text-gray-400 hover:text-white",disabled:i,children:"Cancel"}),(0,s.jsx)(b,{type:"submit",variant:"ghost",className:"bg-blue-600 text-white hover:bg-blue-700",disabled:i,children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})})}em.displayName=et.ck.displayName,l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(et.Z0,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=et.Z0.displayName;var eu=t(2506);let eh=eu.fC;eu.xz;let eg=eu.h_,ef=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(eu.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:a})});ef.displayName=eu.aV.displayName;let ep=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsxs)(eg,{children:[(0,s.jsx)(ef,{}),(0,s.jsx)(eu.VY,{ref:a,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",t),...r})]})});ep.displayName=eu.VY.displayName;let eb=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};eb.displayName="AlertDialogHeader";let ey=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};ey.displayName="AlertDialogFooter";let eN=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(eu.Dx,{ref:a,className:(0,o.cn)("text-lg font-semibold",t),...r})});eN.displayName=eu.Dx.displayName;let ej=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(eu.dk,{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",t),...r})});ej.displayName=eu.dk.displayName,l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(eu.aU,{ref:a,className:(0,o.cn)(p(),t),...r})}).displayName=eu.aU.displayName;let ew=l.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(eu.$j,{ref:a,className:(0,o.cn)(p({variant:"outline"}),"mt-2 sm:mt-0",t),...r})});ew.displayName=eu.$j.displayName;var ev=t(2894);function ek(e){let{member:a,isOpen:t,onClose:r,onDelete:d}=e,[n,o]=(0,l.useState)(!1),[i,c]=(0,l.useState)(""),m=async()=>{o(!0),c("");try{await d(a.id),r()}catch(e){console.error("Failed to delete member:",e),c(e.message||"Failed to delete member. Please try again.")}finally{o(!1)}};return(0,s.jsx)(eh,{open:t,onOpenChange:r,children:(0,s.jsxs)(ep,{className:"bg-gray-900 border-gray-700",children:[(0,s.jsxs)(eb,{children:[(0,s.jsxs)(eN,{className:"text-white flex items-center",children:[(0,s.jsx)(ev.Z,{className:"mr-2 h-5 w-5 text-red-400"}),"Delete Member"]}),(0,s.jsxs)(ej,{className:"text-gray-400",children:["Are you sure you want to delete ",(0,s.jsx)("span",{className:"font-semibold text-white",children:null==a?void 0:a.name})," (",null==a?void 0:a.email,")?",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"This action cannot be undone. This will permanently remove the member's account and all associated data."]})]}),i&&(0,s.jsx)("div",{className:"text-red-400 text-sm bg-red-900/20 p-3 rounded border border-red-800",children:i}),(0,s.jsxs)(ey,{children:[(0,s.jsx)(ew,{className:"bg-gray-800 border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white",disabled:n,children:"Cancel"}),(0,s.jsx)(b,{variant:"ghost",onClick:m,disabled:n,className:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete Member"})]})]})})}function eC(e){let{isOpen:a,onClose:t,onAdd:r}=e,[d,n]=(0,l.useState)({email:"",name:"",role:"member"}),[o,i]=(0,l.useState)(!1),[c,m]=(0,l.useState)({}),x=()=>{let e={};return d.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)||(e.email="Please enter a valid email address"):e.email="Email is required",d.name?d.name.length<2&&(e.name="Name must be at least 2 characters long"):e.name="Name is required",d.role||(e.role="Role is required"),m(e),0===Object.keys(e).length},u=async e=>{if(e.preventDefault(),x()){i(!0);try{await r(d),n({email:"",name:"",role:"member"}),m({}),t()}catch(e){console.error("Failed to add member:",e),m({submit:e.message||"Failed to add member. Please try again."})}finally{i(!1)}}},h=(e,a)=>{n(t=>({...t,[e]:a})),c[e]&&m(a=>({...a,[e]:""}))},g=()=>{n({email:"",name:"",role:"member"}),m({}),t()};return(0,s.jsx)(B,{open:a,onOpenChange:g,children:(0,s.jsxs)(H,{className:"sm:max-w-[425px] bg-gray-900 border-gray-700",children:[(0,s.jsxs)(K,{children:[(0,s.jsxs)(W,{className:"text-white flex items-center",children:[(0,s.jsx)(N.Z,{className:"mr-2 h-5 w-5"}),"Add New Member"]}),(0,s.jsx)(Q,{className:"text-gray-400",children:"Add a new member to the allowed emails list. They will be able to create an account with this information."})]}),(0,s.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(ea,{htmlFor:"add-email",className:"text-gray-300",children:"Email"}),(0,s.jsx)(y,{id:"add-email",type:"email",value:d.email,onChange:e=>h("email",e.target.value),className:"bg-gray-800 border-gray-600 text-white placeholder:text-gray-400",placeholder:"member@example.com"}),c.email&&(0,s.jsx)("p",{className:"text-red-400 text-sm",children:c.email})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(ea,{htmlFor:"add-name",className:"text-gray-300",children:"Name"}),(0,s.jsx)(y,{id:"add-name",type:"text",value:d.name,onChange:e=>h("name",e.target.value),className:"bg-gray-800 border-gray-600 text-white placeholder:text-gray-400",placeholder:"John Doe"}),c.name&&(0,s.jsx)("p",{className:"text-red-400 text-sm",children:c.name})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(ea,{htmlFor:"add-role",className:"text-gray-300",children:"Role"}),(0,s.jsxs)(el,{value:d.role,onValueChange:e=>h("role",e),children:[(0,s.jsx)(en,{className:"bg-gray-800 border-gray-600 text-white",children:(0,s.jsx)(ed,{placeholder:"Select a role"})}),(0,s.jsxs)(ec,{className:"bg-gray-800 border-gray-600",children:[(0,s.jsx)(em,{value:"member",className:"text-white hover:bg-gray-700",children:"Member"}),(0,s.jsx)(em,{value:"admin",className:"text-white hover:bg-gray-700",children:"Admin"})]})]}),c.role&&(0,s.jsx)("p",{className:"text-red-400 text-sm",children:c.role})]}),c.submit&&(0,s.jsx)("div",{className:"text-red-400 text-sm bg-red-900/20 p-3 rounded border border-red-800",children:c.submit}),(0,s.jsxs)(J,{children:[(0,s.jsx)(b,{type:"button",variant:"ghost",onClick:g,className:"text-gray-400 hover:text-white",disabled:o,children:"Cancel"}),(0,s.jsx)(b,{type:"submit",variant:"ghost",className:"bg-green-600 text-white hover:bg-green-700",disabled:o,children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Adding..."]}):"Add Member"})]})]})]})})}function eR(){var e;let[a,t]=(0,l.useState)([]),[r,o]=(0,l.useState)(!0),[g,f]=(0,l.useState)(""),[p,R]=(0,l.useState)({pageIndex:0,pageSize:10}),[S,E]=(0,l.useState)(0),[M,z]=(0,l.useState)(0),[D,F]=(0,l.useState)([]),[Z,_]=(0,l.useState)([]),[P,A]=(0,l.useState)(null),[V,T]=(0,l.useState)(null),[O,I]=(0,l.useState)(!1),{showPopup:U}=(0,k.useAuth)(),q=async()=>{o(!0);try{let e=new URLSearchParams({page:(p.pageIndex+1).toString(),limit:p.pageSize.toString(),...g&&{search:g}}),a=await (0,C.k6)("".concat(C.Pn.ADMIN.MEMBERS,"?").concat(e),{method:"GET"});if(a.success&&a.data)t(a.data.members||[]),z(a.data.total||0),E(a.data.total_pages||0);else throw Error(a.error||"Failed to fetch members")}catch(e){console.error("Error fetching members:",e),U("Failed to fetch members: ".concat(e.message),"error"),t([])}finally{o(!1)}};(0,l.useEffect)(()=>{q()},[p.pageIndex,p.pageSize,g]);let L=async(e,a)=>{try{let t=await (0,C.k6)(C.Pn.ADMIN.MEMBER_UPDATE(e),{method:"PUT",body:a});if(t.success)U("Member updated successfully!","success"),await q();else throw Error(t.error||"Failed to update member")}catch(e){throw console.error("Error updating member:",e),e}},B=async e=>{try{let a=await (0,C.k6)(C.Pn.ADMIN.MEMBER_DELETE(e),{method:"DELETE"});if(a.success)U("Member deleted successfully!","success"),await q();else throw Error(a.error||"Failed to delete member")}catch(e){throw console.error("Error deleting member:",e),e}},$=async e=>{try{let a=await (0,C.k6)(C.Pn.ADMIN.ADD_EMAIL,{method:"POST",body:e});if(a.success)U("Member added to allowed emails successfully!","success"),await q();else throw Error(a.error||"Failed to add member")}catch(e){throw console.error("Error adding member:",e),e}},G=Y(e=>{A(e)},e=>{T(e)}),H=(0,d.b7)({data:a,columns:G,getCoreRowModel:(0,n.sC)(),getPaginationRowModel:(0,n.G_)(),getSortedRowModel:(0,n.tj)(),getFilteredRowModel:(0,n.vL)(),onSortingChange:F,onColumnFiltersChange:_,onPaginationChange:R,state:{sorting:D,columnFilters:Z,pagination:p},manualPagination:!0,pageCount:S});return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 rounded-xl p-8 border border-gray-700",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Members Management"}),(0,s.jsxs)("p",{className:"text-gray-300 text-lg",children:["Manage member accounts and permissions • ",M," total members"]})]}),(0,s.jsxs)(b,{onClick:()=>I(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[(0,s.jsx)(N.Z,{className:"mr-2 h-5 w-5"}),"Add Member"]})]})}),(0,s.jsx)("div",{className:"bg-gray-900/50 backdrop-blur rounded-xl p-6 border border-gray-700",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(j.Z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,s.jsx)(y,{placeholder:"Search members by name or email...",value:g,onChange:e=>f(e.target.value),className:"pl-12 pr-4 py-3 bg-gray-800/70 border-gray-600 text-white placeholder:text-gray-400 rounded-lg text-base focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)(b,{variant:"outline",onClick:q,disabled:r,className:"border-gray-600 text-gray-300 hover:text-white hover:bg-gray-700 px-6 py-3 rounded-lg transition-all duration-200",children:[(0,s.jsx)(w.Z,{className:"mr-2 h-5 w-5 ".concat(r?"animate-spin":"")}),"Refresh"]})]})}),(0,s.jsx)("div",{className:"bg-gray-900/50 backdrop-blur rounded-xl border border-gray-700 overflow-hidden",children:(0,s.jsxs)(i,{children:[(0,s.jsx)(c,{children:H.getHeaderGroups().map(e=>(0,s.jsx)(x,{className:"border-gray-700 bg-gray-800/50",children:e.headers.map(e=>(0,s.jsx)(u,{className:"text-gray-200 font-semibold py-4 px-6",children:e.isPlaceholder?null:(0,d.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(m,{children:r?(0,s.jsx)(x,{children:(0,s.jsx)(h,{colSpan:G.length,className:"h-32 text-center bg-gray-900/30",children:(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)(v.Z,{className:"mr-3 h-6 w-6 animate-spin text-blue-500"}),(0,s.jsx)("span",{className:"text-gray-300 text-lg",children:"Loading members..."})]})})}):(null===(e=H.getRowModel().rows)||void 0===e?void 0:e.length)?H.getRowModel().rows.map(e=>(0,s.jsx)(x,{className:"border-gray-700 hover:bg-gray-800/40 transition-colors duration-200","data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,s.jsx)(h,{className:"text-gray-200 py-4 px-6",children:(0,d.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(x,{children:(0,s.jsx)(h,{colSpan:G.length,className:"h-32 text-center bg-gray-900/30",children:(0,s.jsx)("div",{className:"text-gray-400 text-lg",children:g?"No members found matching your search.":"No members found."})})})})]})}),(0,s.jsx)("div",{className:"bg-gray-900/50 backdrop-blur rounded-xl p-6 border border-gray-700",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,s.jsx)("div",{className:"text-gray-300 text-base",children:M>0&&(0,s.jsxs)(s.Fragment,{children:["Showing ",(0,s.jsx)("span",{className:"font-medium text-white",children:p.pageIndex*p.pageSize+1})," to"," ",(0,s.jsx)("span",{className:"font-medium text-white",children:Math.min((p.pageIndex+1)*p.pageSize,M)})," of"," ",(0,s.jsx)("span",{className:"font-medium text-white",children:M})," members"]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(b,{variant:"outline",size:"sm",onClick:()=>H.previousPage(),disabled:!H.getCanPreviousPage(),className:"border-gray-600 text-gray-300 hover:text-white hover:bg-gray-700 px-4 py-2 rounded-lg transition-all duration-200",children:"Previous"}),(0,s.jsx)(b,{variant:"outline",size:"sm",onClick:()=>H.nextPage(),disabled:!H.getCanNextPage(),className:"border-gray-600 text-gray-300 hover:text-white hover:bg-gray-700 px-4 py-2 rounded-lg transition-all duration-200",children:"Next"})]})]})}),(0,s.jsx)(ex,{member:P,isOpen:!!P,onClose:()=>A(null),onSave:L}),(0,s.jsx)(ek,{member:V,isOpen:!!V,onClose:()=>T(null),onDelete:B}),(0,s.jsx)(eC,{isOpen:O,onClose:()=>I(!1),onAdd:$})]})}var eS=()=>(0,s.jsx)(r.Z,{requiredRole:"admin",children:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-800",children:(0,s.jsx)("div",{className:"container mx-auto py-8 px-6",children:(0,s.jsx)(eR,{})})})})},8243:function(e,a,t){"use strict";t.d(a,{cn:function(){return l}});var s=t(7042),r=t(4769);function l(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.m6)((0,s.W)(a))}}},function(e){e.O(0,[549,980,512,971,938,744],function(){return e(e.s=8967)}),_N_E=e.O()}]);