(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{2898:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var a=r(2265),o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let r=(0,a.forwardRef)(({color:r="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:d,...u},h)=>(0,a.createElement)("svg",{ref:h,...o,width:n,height:n,stroke:r,strokeWidth:i?24*Number(l)/Number(n):l,className:["lucide",`lucide-${s(e)}`,c].join(" "),...u},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r}},5817:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},6637:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},2482:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},1827:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1138:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1541:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},2549:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9101:function(e,t,r){Promise.resolve().then(r.bind(r,6643))},6643:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(7437),o=r(2265),s=r(3452),n=r(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,n.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var i=r(1827),c=r(2482),d=r(6637),u=r(5817);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,n.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);var m=r(1138),p=r(2549),x=r(1541),g=()=>{let{user:e}=(0,s.useAuth)(),[t,r]=(0,o.useState)([]),[n,g]=(0,o.useState)(!0),[f,y]=(0,o.useState)(!1),[b,D]=(0,o.useState)(""),[w,v]=(0,o.useState)("all"),[j,N]=(0,o.useState)(1),[E,C]=(0,o.useState)(1),[k,A]=(0,o.useState)(0),[U,T]=(0,o.useState)(!1),[S,L]=(0,o.useState)(!1),[I,P]=(0,o.useState)(null),[_,R]=(0,o.useState)({title:"",description:"",file:null}),[B,O]=(0,o.useState)({title:"",description:""}),M=(0,o.useRef)(null),G="http://127.0.0.1:8000",F=()=>{let e=localStorage.getItem("munAuth");if(!e)return{};let{email:t,password:r}=JSON.parse(e);return{Authorization:"".concat(t,":").concat(r),"Content-Type":"application/json"}},H=()=>{let e=localStorage.getItem("munAuth");if(!e)return{};let{email:t,password:r}=JSON.parse(e);return{Authorization:"".concat(t,":").concat(r)}},Z=async()=>{try{g(!0);let e=new URLSearchParams({page:j.toString(),limit:"10"});b&&e.append("search",b),"all"!==w&&e.append("file_type",w);let t=await fetch("".concat(G,"/api/resources?").concat(e),{headers:F()});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let a=await t.json();r(a.resources||[]),C(a.pages||1),A(a.total||0)}catch(e){console.error("Error fetching resources:",e),r([])}finally{g(!1)}},z=async e=>{if(e.preventDefault(),!_.file||!_.title.trim()){alert("Please provide both title and file");return}try{y(!0);let e=new FormData;e.append("title",_.title),e.append("description",_.description),e.append("file",_.file);let t=await fetch("".concat(G,"/api/admin/resources/upload"),{method:"POST",headers:H(),body:e});if(!t.ok){let e=await t.json();throw Error(e.detail||"HTTP error! status: ".concat(t.status))}let r=await t.json();console.log("Upload successful:",r),R({title:"",description:"",file:null}),T(!1),M.current&&(M.current.value=""),Z(),alert("Resource uploaded successfully!")}catch(e){console.error("Error uploading resource:",e),alert("Upload failed: ".concat(e.message))}finally{y(!1)}},J=async e=>{if(e.preventDefault(),!I||!B.title.trim()){alert("Please provide a title");return}try{let e=await fetch("".concat(G,"/api/resources/").concat(I.id),{method:"PUT",headers:F(),body:JSON.stringify({title:B.title,description:B.description})});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));L(!1),P(null),O({title:"",description:""}),Z(),alert("Resource updated successfully!")}catch(e){console.error("Error updating resource:",e),alert("Update failed: ".concat(e.message))}},K=async e=>{if(confirm("Are you sure you want to delete this resource?"))try{let t=await fetch("".concat(G,"/api/resources/").concat(e),{method:"DELETE",headers:F()});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));Z(),alert("Resource deleted successfully!")}catch(e){console.error("Error deleting resource:",e),alert("Delete failed: ".concat(e.message))}},q=async(e,t)=>{try{let r=await fetch("".concat(G,"/api/resources/").concat(e,"/download"),{headers:F()});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let a=await r.blob(),o=window.URL.createObjectURL(a),s=document.createElement("a");s.style.display="none",s.href=o,s.download=t,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(o),document.body.removeChild(s),Z()}catch(e){console.error("Error downloading resource:",e),alert("Download failed: ".concat(e.message))}},W=e=>{switch(e.toLowerCase()){case"pdf":return"\uD83D\uDCC4";case"doc":case"docx":return"\uD83D\uDCDD";case"txt":return"\uD83D\uDCC3";case"zip":return"\uD83D\uDCE6";default:return"\uD83D\uDCC1"}},$=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},V=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),X=e=>{P(e),O({title:e.title,description:e.description||""}),L(!0)};return(0,o.useEffect)(()=>{Z()},[j,b,w]),(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-800 p-6",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-gray-800/50 to-gray-900/50 backdrop-blur-xl border border-gray-700/50 rounded-2xl p-8 shadow-xl",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"h-12 w-12 bg-gradient-to-br from-green-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDCC1"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Resources Management"}),(0,a.jsx)("p",{className:"text-gray-400 mt-1",children:"Upload, organize, and manage files and documents."})]})]}),(0,a.jsxs)("button",{onClick:()=>T(!0),className:"flex items-center px-6 py-3 bg-gradient-to-r from-green-600 to-blue-600 text-white font-semibold rounded-xl hover:from-green-500 hover:to-blue-500 transition-all duration-200 shadow-lg hover:shadow-xl",children:[(0,a.jsx)(l,{className:"h-5 w-5 mr-2"}),"Upload Resource"]})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-gray-800/50 to-gray-900/50 backdrop-blur-xl border border-gray-700/50 rounded-2xl p-6 shadow-xl",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(i.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search resources...",value:b,onChange:e=>D(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsxs)("select",{value:w,onChange:e=>v(e.target.value),className:"pl-10 pr-8 py-2 bg-gray-700/50 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),(0,a.jsx)("option",{value:"pdf",children:"PDF"}),(0,a.jsx)("option",{value:"doc",children:"Word Documents"}),(0,a.jsx)("option",{value:"txt",children:"Text Files"}),(0,a.jsx)("option",{value:"zip",children:"Archives"})]})]})]})}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-gray-800/50 to-gray-900/50 backdrop-blur-xl border border-gray-700/50 rounded-2xl p-6 shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-white",children:["Resources (",k,")"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",j," of ",E]})]}),n?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),(0,a.jsx)("p",{className:"text-gray-400 mt-2",children:"Loading resources..."})]}):0===t.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(d.Z,{className:"h-16 w-16 text-gray-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"No Resources Found"}),(0,a.jsx)("p",{className:"text-gray-400",children:b||"all"!==w?"Try adjusting your search or filter criteria.":"Upload your first resource to get started."})]}):(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsx)("div",{className:"bg-gray-700/30 border border-gray-600/50 rounded-lg p-4 hover:bg-gray-700/50 transition-all duration-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:[(0,a.jsx)("div",{className:"text-2xl",children:W(e.file_type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white truncate",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-400 mt-1",children:[(0,a.jsx)("span",{children:e.original_filename}),(0,a.jsx)("span",{children:$(e.file_size)}),(0,a.jsx)("span",{children:e.file_type.toUpperCase()}),(0,a.jsxs)("span",{children:[e.download_count," downloads"]})]}),e.description&&(0,a.jsx)("p",{className:"text-gray-300 text-sm mt-2 line-clamp-2",children:e.description}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Uploaded ",V(e.upload_date)]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,a.jsx)("button",{onClick:()=>q(e.id,e.original_filename),className:"p-2 text-green-400 hover:text-green-300 hover:bg-green-400/10 rounded-lg transition-all duration-200",title:"Download",children:(0,a.jsx)(u.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>X(e),className:"p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-400/10 rounded-lg transition-all duration-200",title:"Edit",children:(0,a.jsx)(h,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>K(e.id),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-400/10 rounded-lg transition-all duration-200",title:"Delete",children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})})]})]})},e.id))}),E>1&&(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mt-6",children:[(0,a.jsx)("button",{onClick:()=>N(e=>Math.max(e-1,1)),disabled:1===j,className:"px-3 py-2 text-sm text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:E},(e,t)=>t+1).map(e=>(0,a.jsx)("button",{onClick:()=>N(e),className:"px-3 py-2 text-sm rounded-lg transition-all duration-200 ".concat(j===e?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700/50"),children:e},e)),(0,a.jsx)("button",{onClick:()=>N(e=>Math.min(e+1,E)),disabled:j===E,className:"px-3 py-2 text-sm text-gray-400 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),U&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 w-full max-w-md border border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Upload Resource"}),(0,a.jsx)("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-white transition-colors duration-200",children:(0,a.jsx)(p.Z,{className:"h-6 w-6"})})]}),(0,a.jsxs)("form",{onSubmit:z,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title *"}),(0,a.jsx)("input",{type:"text",value:_.title,onChange:e=>R(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter resource title",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),(0,a.jsx)("textarea",{value:_.description,onChange:e=>R(t=>({...t,description:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter resource description",rows:"3"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"File *"}),(0,a.jsx)("input",{ref:M,type:"file",accept:".pdf,.doc,.docx,.txt,.zip",onChange:e=>R(t=>({...t,file:e.target.files[0]})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-blue-600 file:text-white file:cursor-pointer hover:file:bg-blue-500",required:!0}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Supported formats: PDF, DOC, DOCX, TXT, ZIP (max 50MB)"})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>T(!1),className:"flex-1 px-4 py-2 text-gray-400 border border-gray-600 rounded-lg hover:text-white hover:border-gray-500 transition-all duration-200",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:f,className:"flex-1 px-4 py-2 bg-gradient-to-r from-green-600 to-blue-600 text-white font-semibold rounded-lg hover:from-green-500 hover:to-blue-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Upload"]})})]})]})]})}),S&&I&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-2xl p-6 w-full max-w-md border border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Edit Resource"}),(0,a.jsx)("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-white transition-colors duration-200",children:(0,a.jsx)(p.Z,{className:"h-6 w-6"})})]}),(0,a.jsxs)("form",{onSubmit:J,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title *"}),(0,a.jsx)("input",{type:"text",value:B.title,onChange:e=>O(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter resource title",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),(0,a.jsx)("textarea",{value:B.description,onChange:e=>O(t=>({...t,description:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter resource description",rows:"3"})]}),(0,a.jsxs)("div",{className:"bg-gray-700/30 p-3 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-300",children:[(0,a.jsx)("strong",{children:"File:"})," ",I.original_filename]}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"File cannot be changed. Upload a new resource to replace this file."})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>L(!1),className:"flex-1 px-4 py-2 text-gray-400 border border-gray-600 rounded-lg hover:text-white hover:border-gray-500 transition-all duration-200",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold rounded-lg hover:from-blue-500 hover:to-purple-500 transition-all duration-200 flex items-center justify-center",children:[(0,a.jsx)(h,{className:"h-4 w-4 mr-2"}),"Update"]})]})]})]})})]})}},3452:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return h},useAuth:function(){return l}});var a=r(7437),o=r(2265),s=r(9407);let n=(0,o.createContext)(void 0),l=()=>{let e=(0,o.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},i=(e,t)=>{let r={token:e,user:{email:t.email,role:t.role,full_name:t.full_name||t.name,id:t.id},credentials:{email:t.email,password:t.password}};localStorage.setItem("munAuth",JSON.stringify(r.credentials)),localStorage.setItem("munAuthToken",e),localStorage.setItem("munAuthUser",JSON.stringify(r.user))},c=()=>{try{let e=localStorage.getItem("munAuthToken"),t=localStorage.getItem("munAuthUser"),r=localStorage.getItem("munAuth");if(!e||!t||!r)return null;return{token:e,user:JSON.parse(t),credentials:JSON.parse(r)}}catch(e){return null}},d=()=>{localStorage.removeItem("munAuth"),localStorage.removeItem("munAuthToken"),localStorage.removeItem("munAuthUser")},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",r=document.createElement("div");r.innerHTML='\n    <div style="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: '.concat("error"===t?"#ef4444":"#10b981",";\n      color: white;\n      padding: 16px 24px;\n      border-radius: 8px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n      z-index: 9999;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      font-size: 14px;\n      font-weight: 500;\n      max-width: 400px;\n      animation: slideIn 0.3s ease-out;\n    \">\n      ").concat(e,"\n    </div>\n  ");let a=document.createElement("style");a.textContent="\n    @keyframes slideIn {\n      from { transform: translateX(100%); opacity: 0; }\n      to { transform: translateX(0); opacity: 1; }\n    }\n  ",document.head.appendChild(a),document.body.appendChild(r),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),a.parentNode&&a.parentNode.removeChild(a)},4e3)},h=e=>{let{children:t}=e,[r,l]=(0,o.useState)(null),[h,m]=(0,o.useState)(!0),[p,x]=(0,o.useState)(!1),[g,f]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async()=>{let e=c();if(console.log("\uD83C\uDFC1 INIT DEBUG - Auth data from localStorage:",e),e){var t;console.log("\uD83C\uDFC1 INIT DEBUG - User from localStorage:",e.user),console.log("\uD83C\uDFC1 INIT DEBUG - User role from localStorage:",null===(t=e.user)||void 0===t?void 0:t.role);let r=await (0,s.k_)(s.Pn.AUTH.LOGIN,{method:"POST",body:e.credentials});console.log("\uD83C\uDFC1 INIT DEBUG - Verification response:",r),r.success&&r.data&&r.data.success?(console.log("\uD83C\uDFC1 INIT DEBUG - Setting user from localStorage:",e.user),l(e.user),f(e.token),x(!0)):(console.log("\uD83C\uDFC1 INIT DEBUG - Verification failed, clearing auth data"),d())}else console.log("\uD83C\uDFC1 INIT DEBUG - No auth data found in localStorage");m(!1)})()},[]);let y=async(e,t)=>{m(!0);try{var r,a,o,n;let c=await (0,s.k_)(s.Pn.AUTH.LOGIN,{method:"POST",body:{email:e,password:t}});if(console.log("\uD83D\uDD0D AUTH DEBUG - API Response:",c),console.log("\uD83D\uDD0D AUTH DEBUG - Response success:",c.success),console.log("\uD83D\uDD0D AUTH DEBUG - Response data:",c.data),console.log("\uD83D\uDD0D AUTH DEBUG - User data:",null===(r=c.data)||void 0===r?void 0:r.user),console.log("\uD83D\uDD0D AUTH DEBUG - User role:",null===(o=c.data)||void 0===o?void 0:null===(a=o.user)||void 0===a?void 0:a.role),!c.success||!c.data||!c.data.success)return{success:!1,error:(null===(n=c.data)||void 0===n?void 0:n.error)||c.error||"Login failed"};{let e="token_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),r={...c.data.user,password:t};return i(e,r),l(c.data.user),f(e),x(!0),console.log("✅ AUTH DEBUG - User set in context:",c.data.user),console.log("✅ AUTH DEBUG - Auth state updated, isAuthenticated: true"),{success:!0,user:c.data.user,token:e}}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Login failed"}}finally{m(!1)}},b=async e=>{try{let t=await (0,s.k_)(s.Pn.AUTH.CHECK_EMAIL,{method:"POST",body:{email:e}});if(console.log("\uD83D\uDD0D EMAIL CHECK DEBUG - Raw response:",t),console.log("\uD83D\uDD0D EMAIL CHECK DEBUG - Response success:",t.success),console.log("\uD83D\uDD0D EMAIL CHECK DEBUG - Response data:",t.data),!t.success||!t.data)return{success:!1,exists:!1,error:t.error||"Check failed"};{let e=t.data;if(console.log("\uD83D\uDD0D EMAIL CHECK DEBUG - Email allowed:",e.allowed),console.log("\uD83D\uDD0D EMAIL CHECK DEBUG - Account exists:",e.account_exists),e.allowed)return{success:!0,exists:e.account_exists||!1,name:e.name,role:e.role};return{success:!1,exists:!1,error:"Email not pre-approved for registration"}}}catch(e){return console.error("\uD83D\uDD0D EMAIL CHECK DEBUG - Exception:",e),{success:!1,exists:!1,error:e instanceof Error?e.message:"Check failed"}}},D=async e=>{try{var t;let r=await (0,s.k_)(s.Pn.AUTH.CREATE_ACCOUNT,{method:"POST",body:e});if(r.success&&r.data&&r.data.success)return await y(e.email,e.password);return{success:!1,error:(null===(t=r.data)||void 0===t?void 0:t.error)||r.error||"Registration failed"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Registration failed"}}};return(0,a.jsx)(n.Provider,{value:{user:r,isLoading:h,isAuthenticated:p,authToken:g,login:y,logout:()=>{d(),l(null),f(null),x(!1),window.location.href="/"},checkEmailAvailability:b,register:D,checkAdminAccess:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return p?(null==r?void 0:r.role)==="admin"||(e&&u("You need to be an admin to access this page!"),!1):(e&&u("You need to be logged in as an admin to access this page!"),!1)},showPopup:u},children:t})};t.default=n},9407:function(e,t,r){"use strict";r.d(t,{Pn:function(){return d},Sv:function(){return c},WA:function(){return o},cT:function(){return i},k6:function(){return l},k_:function(){return n}});let a="http://127.0.0.1:8000",o=()=>{let e=localStorage.getItem("munAuth");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},s=e=>{let t=e||o();return t?{Authorization:"".concat(t.email,":").concat(t.password)}:{}},n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r="".concat(a).concat(e);console.log("\uD83C\uDF10 API CALL DEBUG - URL:",r),console.log("\uD83C\uDF10 API CALL DEBUG - API_BASE_URL:",a),console.log("\uD83C\uDF10 API CALL DEBUG - endpoint:",e),console.log("\uD83C\uDF10 API CALL DEBUG - Options:",t);let o={headers:{"Content-Type":"application/json",...t.headers},...t};o.body&&"object"==typeof o.body&&(o.body=JSON.stringify(o.body),console.log("\uD83C\uDF10 API CALL DEBUG - Stringified body:",o.body)),console.log("\uD83C\uDF10 API CALL DEBUG - Making fetch request to:",r);let s=await fetch(r,o);if(console.log("\uD83C\uDF10 API CALL DEBUG - Response status:",s.status),console.log("\uD83C\uDF10 API CALL DEBUG - Response ok:",s.ok),!s.ok){let e=await s.text();return console.log("\uD83C\uDF10 API CALL DEBUG - Error text:",e),{success:!1,error:e||"HTTP ".concat(s.status,": ").concat(s.statusText)}}let n=await s.json();console.log("\uD83C\uDF10 API CALL DEBUG - Raw response data:",n);let l={success:!0,data:n};return console.log("\uD83C\uDF10 API CALL DEBUG - Final result:",l),l}catch(e){return console.log("\uD83C\uDF10 API CALL DEBUG - Catch error:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}},l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s();return n(e,{...t,headers:{"Content-Type":"application/json",...r,...t.headers}})},i=async(e,t)=>{try{let r=s(),o="".concat(a).concat(e),n=await fetch(o,{method:"POST",headers:{...r},body:t});if(!n.ok){let e=await n.text();return{success:!1,error:e||"HTTP ".concat(n.status,": ").concat(n.statusText)}}let l=await n.json();return{success:!0,data:l}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Upload failed"}}},c=async(e,t)=>{try{let r=s(),o="".concat(a).concat(e),n=await fetch(o,{headers:r});if(n.ok){let e=await n.blob(),r=window.URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download=t,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(r),document.body.removeChild(a)}else throw Error("Download failed")}catch(e){throw console.error("Download error:",e),e}},d={AUTH:{CHECK_EMAIL:"/api/auth/check-email",CREATE_ACCOUNT:"/api/auth/create-account",LOGIN:"/api/auth/login"},BLOGS:{LIST:"/api/blogs",GET:e=>"/api/blogs/".concat(e),CREATE:"/api/blogs",UPDATE:e=>"/api/blogs/".concat(e),DELETE:e=>"/api/blogs/".concat(e)},RESOURCES:{LIST:"/api/resources",UPLOAD:"/api/admin/resources/upload",DOWNLOAD:e=>"/api/resources/".concat(e,"/download"),DELETE:e=>"/api/resources/".concat(e)},ADMIN:{DASHBOARD_STATS:"/api/admin/dashboard/stats",MEMBERS:"/api/admin/members",MEMBER_UPDATE:e=>"/api/admin/members/".concat(e),MEMBER_DELETE:e=>"/api/admin/members/".concat(e),ADD_EMAIL:"/api/admin/members/add-email",AUTHORS:"/api/admin/authors",CREATE_AUTHOR:"/api/admin/authors"},HEALTH:"/health"}},622:function(e,t,r){"use strict";var a=r(2265),o=Symbol.for("react.element"),s=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,l=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var a,s={},c=null,d=null;for(a in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)n.call(t,a)&&!i.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===s[a]&&(s[a]=t[a]);return{$$typeof:o,type:e,key:c,ref:d,props:s,_owner:l.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=9101)}),_N_E=e.O()}]);