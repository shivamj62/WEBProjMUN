(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{3067:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8203:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},1798:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]])},6637:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},8438:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},6539:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},7461:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]])},6142:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},2741:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},1541:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(2898).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},1687:function(e,t,s){Promise.resolve().then(s.bind(s,7778))},7778:function(e,t,s){"use strict";s.r(t);var a=s(7437),r=s(4512),n=s(6350),i=s(45),l=s(3452),c=s(2265),o=s(3067),d=s(2549),m=s(6637),x=s(8203),h=s(8438),u=s(1541),y=s(9407),p=s(4033);t.default=()=>{let{user:e}=(0,l.useAuth)(),t=(0,p.useRouter)(),[s,b]=(0,c.useState)({title:"",content:"",competition_date:"",image1:null,image2:null}),[g,f]=(0,c.useState)(!1),[j,v]=(0,c.useState)(""),[N,k]=(0,c.useState)({image1:null,image2:null}),w=e=>{let{name:t,value:s}=e.target;b(e=>({...e,[t]:s}))},Z=(e,t)=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(a){if(!a.type.startsWith("image/")){alert("Please select an image file");return}if(a.size>10485760){alert("Image size should be less than 10MB");return}b(e=>({...e,[t]:a}));let e=new FileReader;e.onload=e=>{k(s=>{var a;return{...s,[t]:null===(a=e.target)||void 0===a?void 0:a.result}})},e.readAsDataURL(a)}},C=e=>{b(t=>({...t,[e]:null})),k(t=>({...t,[e]:null}))},P=async e=>{e.preventDefault(),f(!0),v("");try{let e=new FormData;e.append("title",s.title),e.append("content",s.content),s.competition_date&&e.append("competition_date",s.competition_date),s.image1&&e.append("image1",s.image1),s.image2&&e.append("image2",s.image2);let a=await (0,y.cT)(y.Pn.BLOGS.CREATE,e);a.success?t.push("/admin?tab=blogs"):v(a.error||"Failed to create blog post")}catch(e){v("Failed to create blog post. Please try again."),console.error("Blog creation error:",e)}finally{f(!1)}};return(null==e?void 0:e.role)!=="admin"?(0,a.jsx)(r.Z,{children:(0,a.jsx)("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-secondary-700",children:"Only administrators can create blog posts."})]})})}):(0,a.jsx)(r.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-secondary-50",children:[(0,a.jsx)(n.default,{}),(0,a.jsx)("main",{className:"pt-24 pb-16",children:(0,a.jsxs)("div",{className:"container-custom max-w-4xl",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>t.back(),className:"btn-ghost border border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white flex items-center",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-serif font-bold text-secondary-900",children:"Create New Blog Post"}),(0,a.jsx)("p",{className:"text-secondary-600",children:"Share the latest MUN conference reports and updates"})]})]})}),(0,a.jsxs)("div",{className:"card",children:[j&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(d.Z,{className:"w-5 h-5 text-red-600"})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-red-800",children:j})})]})}),(0,a.jsxs)("form",{onSubmit:P,className:"space-y-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-secondary-900 flex items-center",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5 mr-2"}),"Blog Information"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-secondary-700 mb-2",children:"Blog Title *"}),(0,a.jsx)("input",{type:"text",id:"title",name:"title",value:s.title,onChange:w,required:!0,className:"input-field",placeholder:"Enter an engaging blog title..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"competition_date",className:"block text-sm font-medium text-secondary-700 mb-2",children:"Competition Date"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-secondary-400"}),(0,a.jsx)("input",{type:"date",id:"competition_date",name:"competition_date",value:s.competition_date,onChange:w,className:"input-field pl-10"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-secondary-700 mb-2",children:"Blog Content *"}),(0,a.jsx)("textarea",{id:"content",name:"content",value:s.content,onChange:w,required:!0,rows:12,className:"input-field resize-y",placeholder:"Write your blog content here... You can include details about the MUN conference, experiences, achievements, and insights."}),(0,a.jsxs)("p",{className:"text-sm text-secondary-500 mt-1",children:[s.content.length," characters"]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-secondary-900 flex items-center",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 mr-2"}),"Blog Images"]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"Primary Image"}),N.image1?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:N.image1,alt:"Preview 1",className:"w-full h-48 object-cover rounded-lg border border-secondary-200"}),(0,a.jsx)("button",{type:"button",onClick:()=>C("image1"),className:"absolute top-2 right-2 bg-red-600 text-white rounded-full p-1 hover:bg-red-700 transition-colors",children:(0,a.jsx)(d.Z,{className:"w-4 h-4"})})]}):(0,a.jsxs)("label",{className:"cursor-pointer",children:[(0,a.jsxs)("div",{className:"w-full h-48 border-2 border-dashed border-secondary-300 rounded-lg flex flex-col items-center justify-center text-secondary-500 hover:border-primary-400 hover:text-primary-600 transition-colors",children:[(0,a.jsx)(u.Z,{className:"w-8 h-8 mb-2"}),(0,a.jsx)("span",{children:"Click to upload image"}),(0,a.jsx)("span",{className:"text-xs",children:"PNG, JPG, GIF up to 10MB"})]}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>Z(e,"image1"),className:"hidden"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"Secondary Image"}),N.image2?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:N.image2,alt:"Preview 2",className:"w-full h-48 object-cover rounded-lg border border-secondary-200"}),(0,a.jsx)("button",{type:"button",onClick:()=>C("image2"),className:"absolute top-2 right-2 bg-red-600 text-white rounded-full p-1 hover:bg-red-700 transition-colors",children:(0,a.jsx)(d.Z,{className:"w-4 h-4"})})]}):(0,a.jsxs)("label",{className:"cursor-pointer",children:[(0,a.jsxs)("div",{className:"w-full h-48 border-2 border-dashed border-secondary-300 rounded-lg flex flex-col items-center justify-center text-secondary-500 hover:border-primary-400 hover:text-primary-600 transition-colors",children:[(0,a.jsx)(u.Z,{className:"w-8 h-8 mb-2"}),(0,a.jsx)("span",{children:"Click to upload image"}),(0,a.jsx)("span",{className:"text-xs",children:"PNG, JPG, GIF up to 10MB"})]}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>Z(e,"image2"),className:"hidden"})]})]})]}),(0,a.jsx)("p",{className:"text-sm text-secondary-600",children:"Images are optional but recommended. The primary image will be used as the blog thumbnail."})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-secondary-200",children:[(0,a.jsx)("button",{type:"button",onClick:()=>t.back(),className:"btn-ghost border border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white",disabled:g,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:g||!s.title||!s.content,className:"btn-ghost border border-primary-600 text-primary-600 hover:bg-primary-600 hover:text-white flex items-center",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Creating Blog..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"Create Blog Post"]})})]})]})]})]})}),(0,a.jsx)(i.default,{})]})})}},4512:function(e,t,s){"use strict";var a=s(7437),r=s(2265),n=s(4033),i=s(3452);t.Z=e=>{let{children:t,requiredRole:s,redirectTo:l="/auth/login"}=e,{user:c,isAuthenticated:o,isLoading:d,showPopup:m}=(0,i.useAuth)(),[x,h]=(0,r.useState)(!0),u=(0,n.useRouter)();return((0,r.useEffect)(()=>{if(!d){if(!o){"admin"===s?(m("You need to be logged in as an admin to access this page!"),u.push("/")):u.push(l);return}if(s&&(null==c?void 0:c.role)!==s&&"admin"===s){m("You need to be an admin to access this page!"),u.push("/");return}h(!1)}},[o,d,c,s,u,l,m]),d||x)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-secondary-600",children:"Loading..."})]})}):(0,a.jsx)(a.Fragment,{children:t})}},4033:function(e,t,s){e.exports=s(5313)}},function(e){e.O(0,[921,180,865,558,935,971,938,744],function(){return e(e.s=1687)}),_N_E=e.O()}]);