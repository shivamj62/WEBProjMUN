(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[782],{5817:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},1798:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]])},6637:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},2482:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},3167:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]])},6539:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]])},7461:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]])},6142:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},2741:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},1827:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1138:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},8339:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(2898).Z)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]])},2582:function(e,s,t){Promise.resolve().then(t.bind(t,5801))},5801:function(e,s,t){"use strict";t.r(s);var a=t(7437),l=t(4512),n=t(6350),i=t(45),r=t(3452),c=t(2265),d=t(8339),o=t(6637),u=t(1827),x=t(2482),m=t(3167),h=t(5817),p=t(1138),f=t(9407);s.default=()=>{let{user:e}=(0,r.useAuth)(),[s,t]=(0,c.useState)([]),[y,v]=(0,c.useState)([]),[j,b]=(0,c.useState)(!0),[g,N]=(0,c.useState)(""),[w,k]=(0,c.useState)("all");(0,c.useEffect)(()=>{Z()},[]),(0,c.useEffect)(()=>{C()},[g,w,s]);let Z=async()=>{try{let e=await (0,f.k6)(f.Pn.RESOURCES.LIST);e.success&&e.data&&e.data.resources&&t(e.data.resources)}catch(e){console.error("Failed to fetch resources:",e)}finally{b(!1)}},C=()=>{let e=s;g&&(e=e.filter(e=>{var s,t,a;return(null===(s=e.title)||void 0===s?void 0:s.toLowerCase().includes(g.toLowerCase()))||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(g.toLowerCase()))||(null===(a=e.uploaded_by)||void 0===a?void 0:a.toLowerCase().includes(g.toLowerCase()))})),"all"!==w&&(e=e.filter(e=>{var s;let t=null===(s=(e.file_path||"").split(".").pop())||void 0===s?void 0:s.toLowerCase();switch(w){case"documents":return["pdf","doc","docx","txt"].includes(t);case"images":return["jpg","jpeg","png","gif","webp"].includes(t);case"videos":return["mp4","avi","mov","wmv"].includes(t);default:return!0}})),v(e)},M=async e=>{try{await (0,f.Sv)(f.Pn.RESOURCES.DOWNLOAD(e.id),e.title||"download")}catch(e){console.error("Download failed:",e)}},S=async s=>{if(!(null==e?void 0:e.role)||"admin"!==e.role){alert("Only administrators can delete resources");return}if(confirm("Are you sure you want to delete this resource?"))try{(await (0,f.k6)(f.Pn.RESOURCES.DELETE(s),{method:"DELETE"})).success&&await Z()}catch(e){console.error("Delete failed:",e)}},A=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},E=e=>{var s;let t=(null==e?void 0:null===(s=e.split(".").pop())||void 0===s?void 0:s.toLowerCase())||"";return["jpg","jpeg","png","gif","webp"].includes(t)?(0,a.jsx)(Image,{className:"w-8 h-8 text-green-600"}):["mp4","avi","mov","wmv"].includes(t)?(0,a.jsx)(d.Z,{className:"w-8 h-8 text-red-600"}):["pdf","doc","docx","txt"].includes(t)?(0,a.jsx)(o.Z,{className:"w-8 h-8 text-blue-600"}):(0,a.jsx)(File,{className:"w-8 h-8 text-secondary-600"})},L=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,a.jsx)(l.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,a.jsx)(n.default,{}),(0,a.jsx)("main",{className:"pt-24 pb-16",children:(0,a.jsxs)("div",{className:"container-custom",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-serif font-bold text-white mb-6",children:"Resources Dashboard"}),(0,a.jsx)("div",{className:"w-24 h-1 bg-primary-500 mx-auto mb-6"}),(0,a.jsxs)("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:["Welcome back, ",(0,a.jsx)("span",{className:"font-semibold text-primary-400",children:(null==e?void 0:e.full_name)||(null==e?void 0:e.name)}),"! Access and manage your exclusive MUN Society resources."]})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(u.Z,{className:"h-5 w-5 text-secondary-400"})}),(0,a.jsx)("input",{type:"text",value:g,onChange:e=>N(e.target.value),className:"input-field pl-10",placeholder:"Search resources by title, description, or uploader..."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5 text-secondary-400"}),(0,a.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:"input-field min-w-[150px]",children:[(0,a.jsx)("option",{value:"all",children:"All Files"}),(0,a.jsx)("option",{value:"documents",children:"Documents"}),(0,a.jsx)("option",{value:"images",children:"Images"}),(0,a.jsx)("option",{value:"videos",children:"Videos"})]})]})]}),j?(0,a.jsx)("div",{className:"grid gap-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"card animate-pulse",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-secondary-300 rounded"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"h-4 bg-secondary-300 rounded w-1/2 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-secondary-300 rounded w-1/4"})]})]})},s))}):0===y.length?(0,a.jsx)("div",{className:"text-center py-16",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,a.jsx)("div",{className:"w-24 h-24 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(m.Z,{className:"w-12 h-12 text-primary-600"})}),(0,a.jsx)("h3",{className:"text-2xl font-serif font-bold text-secondary-900 mb-4",children:g||"all"!==w?"No resources found":"No resources available"}),(0,a.jsx)("p",{className:"text-secondary-700 mb-6",children:g||"all"!==w?"Try adjusting your search or filter criteria.":"Resources will appear here when they are uploaded by administrators."}),(g||"all"!==w)&&(0,a.jsxs)("div",{className:"flex gap-4 justify-center",children:[g&&(0,a.jsx)("button",{onClick:()=>N(""),className:"btn-ghost",children:"Clear Search"}),"all"!==w&&(0,a.jsx)("button",{onClick:()=>k("all"),className:"btn-ghost",children:"Show All Files"})]})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,a.jsx)("p",{className:"text-secondary-600",children:g||"all"!==w?"Found ".concat(y.length," resource").concat(1!==y.length?"s":""):"".concat(y.length," resource").concat(1!==y.length?"s":""," available")}),(null==e?void 0:e.role)==="admin"&&(0,a.jsx)("span",{className:"text-sm bg-primary-100 text-primary-700 px-3 py-1 rounded-full",children:"Admin Access"})]}),(0,a.jsx)("div",{className:"grid gap-4",children:y.map(s=>(0,a.jsx)("div",{className:"card group hover:shadow-lg transition-shadow border-l-4 border-primary-600",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:E(s.file_path)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-secondary-900 truncate",children:s.title}),(0,a.jsx)("p",{className:"text-secondary-700 text-sm truncate",children:s.description}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-secondary-500 space-x-4 mt-1",children:[(0,a.jsx)("span",{children:A(s.file_size)}),(0,a.jsxs)("span",{children:["Uploaded by ",s.uploaded_by]}),(0,a.jsx)("span",{children:L(s.created_at)})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,a.jsxs)("button",{onClick:()=>M(s),className:"btn-ghost flex items-center",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"Download"]}),(null==e?void 0:e.role)==="admin"&&(0,a.jsx)("button",{onClick:()=>S(s.id),className:"btn-ghost border-red-200 text-red-600 hover:bg-red-50 flex items-center",children:(0,a.jsx)(p.Z,{className:"w-4 h-4"})})]})]})},s.id))})]}),(0,a.jsxs)("div",{className:"mt-12 grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-serif font-bold text-white mb-4",children:"Resource Guidelines"}),(0,a.jsxs)("div",{className:"text-gray-300",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Allowed File Types:"}),(0,a.jsxs)("ul",{className:"text-sm space-y-1 mb-4",children:[(0,a.jsx)("li",{children:"• Documents: PDF, DOC, DOCX, TXT"}),(0,a.jsx)("li",{children:"• Images: JPG, PNG, GIF, WebP"}),(0,a.jsx)("li",{children:"• Videos: MP4, AVI, MOV"})]}),(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Important Notes:"}),(0,a.jsxs)("ul",{className:"text-sm space-y-1",children:[(0,a.jsx)("li",{children:"• Maximum file size: 50MB"}),(0,a.jsx)("li",{children:"• Resources are available to all members"}),(0,a.jsx)("li",{children:"• Only administrators can upload resources"}),(0,a.jsx)("li",{children:"• Only administrators can delete resources"})]})]})]}),(0,a.jsxs)("div",{className:"bg-green-50 rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-serif font-bold text-green-900 mb-4",children:"Your Account"}),(0,a.jsx)("div",{className:"text-green-800",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Name:"})," ",(null==e?void 0:e.full_name)||(null==e?void 0:e.name)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Email:"})," ",null==e?void 0:e.email]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Role:"}),(0,a.jsx)("span",{className:"ml-2 px-2 py-1 rounded text-xs font-medium ".concat((null==e?void 0:e.role)==="admin"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:(null==e?void 0:e.role)==="admin"?"Administrator":"Member"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Access Level:"})," Full Resources Access"]})]})})]})]})]})}),(0,a.jsx)(i.default,{})]})})}},4512:function(e,s,t){"use strict";var a=t(7437),l=t(2265),n=t(4033),i=t(3452);s.Z=e=>{let{children:s,requiredRole:t,redirectTo:r="/auth/login"}=e,{user:c,isAuthenticated:d,isLoading:o,showPopup:u}=(0,i.useAuth)(),[x,m]=(0,l.useState)(!0),h=(0,n.useRouter)();return((0,l.useEffect)(()=>{if(!o){if(!d){"admin"===t?(u("You need to be logged in as an admin to access this page!"),h.push("/")):h.push(r);return}if(t&&(null==c?void 0:c.role)!==t&&"admin"===t){u("You need to be an admin to access this page!"),h.push("/");return}m(!1)}},[d,o,c,t,h,r,u]),o||x)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-secondary-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-secondary-600",children:"Loading..."})]})}):(0,a.jsx)(a.Fragment,{children:s})}},4033:function(e,s,t){e.exports=t(5313)}},function(e){e.O(0,[921,180,865,558,935,971,938,744],function(){return e(e.s=2582)}),_N_E=e.O()}]);