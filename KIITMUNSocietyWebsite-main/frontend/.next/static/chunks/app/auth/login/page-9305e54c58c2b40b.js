(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{7216:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,s(2898).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},9670:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,s(2898).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5589:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,s(2898).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},5122:function(e,t,s){Promise.resolve().then(s.bind(s,1468))},1468:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var o=s(7437),a=s(2265),r=s(4033),n=s(1295),c=s(5589),l=s(7216),i=s(9670);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,s(2898).Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var d=s(3452),m=s(1396),h=s.n(m),D=s(6691),p=s.n(D),f=()=>{let[e,t]=(0,a.useState)({email:"",password:""}),[s,m]=(0,a.useState)(!1),[D,f]=(0,a.useState)(!1),[g,x]=(0,a.useState)(""),[y,E]=(0,a.useState)("/"),{login:A}=(0,d.useAuth)(),C=(0,r.useRouter)();(0,a.useEffect)(()=>{"resources"===new URLSearchParams(window.location.search).get("redirect")&&E("/resources-dashboard")},[]);let b=s=>{t({...e,[s.target.name]:s.target.value}),g&&x("")},v=async t=>{t.preventDefault(),f(!0),x("");let s=await A(e.email,e.password);s.success?C.push(y):x(s.error||"Login failed"),f(!1)};return(0,o.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-100 flex items-center justify-center py-12 px-4",children:(0,o.jsxs)("div",{className:"max-w-md w-full",children:[(0,o.jsxs)("div",{className:"text-center mb-8",children:[(0,o.jsx)("div",{className:"flex justify-center mb-4",children:(0,o.jsx)(p(),{src:"/images/logo/kiit-mun-logo.png",alt:"KIIT MUN Society",width:64,height:64,className:"w-16 h-16 object-contain"})}),(0,o.jsx)("h1",{className:"text-3xl font-serif font-bold text-secondary-900 mb-2",children:"Welcome Back"}),(0,o.jsx)("p",{className:"text-secondary-600",children:"Sign in to access your MUN Society account"})]}),(0,o.jsxs)("div",{className:"card",children:[g&&(0,o.jsx)("div",{className:"mb-6 p-4 bg-red-100 border border-red-300 rounded-lg",children:(0,o.jsx)("p",{className:"text-red-800 text-sm",children:g})}),(0,o.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-secondary-700 mb-2",children:"Email Address"}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,o.jsx)(n.Z,{className:"h-5 w-5 text-secondary-400"})}),(0,o.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:b,required:!0,className:"input-field pl-10",placeholder:"your.email@example.com"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-secondary-700 mb-2",children:"Password"}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,o.jsx)(c.Z,{className:"h-5 w-5 text-secondary-400"})}),(0,o.jsx)("input",{type:s?"text":"password",id:"password",name:"password",value:e.password,onChange:b,required:!0,className:"input-field pl-10 pr-10",placeholder:"Enter your password"}),(0,o.jsx)("button",{type:"button",onClick:()=>m(!s),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s?(0,o.jsx)(l.Z,{className:"h-5 w-5 text-secondary-400 hover:text-secondary-600"}):(0,o.jsx)(i.Z,{className:"h-5 w-5 text-secondary-400 hover:text-secondary-600"})})]})]}),(0,o.jsx)("button",{type:"submit",disabled:D,className:"w-full btn-ghost border border-primary-600 text-primary-600 hover:bg-primary-600 hover:text-white flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:D?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-current"}),(0,o.jsx)("span",{children:"Signing In..."})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u,{className:"w-5 h-5"}),(0,o.jsx)("span",{children:"Sign In"})]})})]}),(0,o.jsx)("div",{className:"mt-6 text-center",children:(0,o.jsxs)("p",{className:"text-secondary-600",children:["Don't have an account?"," ",(0,o.jsx)(h(),{href:"/auth/register",className:"text-primary-600 hover:text-primary-700 font-medium transition-colors",children:"Create Account"})]})})]}),(0,o.jsx)("div",{className:"mt-6 text-center",children:(0,o.jsx)(h(),{href:"/",className:"text-secondary-600 hover:text-secondary-800 transition-colors",children:"← Back to Home"})})]})})}},3452:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return m},useAuth:function(){return c}});var o=s(7437),a=s(2265),r=s(9407);let n=(0,a.createContext)(void 0),c=()=>{let e=(0,a.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e},l=(e,t)=>{let s={token:e,user:{email:t.email,role:t.role,full_name:t.full_name||t.name,id:t.id},credentials:{email:t.email,password:t.password}};localStorage.setItem("munAuth",JSON.stringify(s.credentials)),localStorage.setItem("munAuthToken",e),localStorage.setItem("munAuthUser",JSON.stringify(s.user))},i=()=>{try{let e=localStorage.getItem("munAuthToken"),t=localStorage.getItem("munAuthUser"),s=localStorage.getItem("munAuth");if(!e||!t||!s)return null;return{token:e,user:JSON.parse(t),credentials:JSON.parse(s)}}catch(e){return null}},u=()=>{localStorage.removeItem("munAuth"),localStorage.removeItem("munAuthToken"),localStorage.removeItem("munAuthUser")},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",s=document.createElement("div");s.innerHTML='\n    <div style="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: '.concat("error"===t?"#ef4444":"#10b981",";\n      color: white;\n      padding: 16px 24px;\n      border-radius: 8px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n      z-index: 9999;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      font-size: 14px;\n      font-weight: 500;\n      max-width: 400px;\n      animation: slideIn 0.3s ease-out;\n    \">\n      ").concat(e,"\n    </div>\n  ");let o=document.createElement("style");o.textContent="\n    @keyframes slideIn {\n      from { transform: translateX(100%); opacity: 0; }\n      to { transform: translateX(0); opacity: 1; }\n    }\n  ",document.head.appendChild(o),document.body.appendChild(s),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s),o.parentNode&&o.parentNode.removeChild(o)},4e3)},m=e=>{let{children:t}=e,[s,c]=(0,a.useState)(null),[m,h]=(0,a.useState)(!0),[D,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{let e=i();if(console.log("\uD83C\uDFC1 INIT DEBUG - Auth data from localStorage:",e),e){var t;console.log("\uD83C\uDFC1 INIT DEBUG - User from localStorage:",e.user),console.log("\uD83C\uDFC1 INIT DEBUG - User role from localStorage:",null===(t=e.user)||void 0===t?void 0:t.role);let s=await (0,r.k_)(r.Pn.AUTH.LOGIN,{method:"POST",body:e.credentials});console.log("\uD83C\uDFC1 INIT DEBUG - Verification response:",s),s.success&&s.data&&s.data.success?(console.log("\uD83C\uDFC1 INIT DEBUG - Setting user from localStorage:",e.user),c(e.user),g(e.token),p(!0)):(console.log("\uD83C\uDFC1 INIT DEBUG - Verification failed, clearing auth data"),u())}else console.log("\uD83C\uDFC1 INIT DEBUG - No auth data found in localStorage");h(!1)})()},[]);let x=async(e,t)=>{h(!0);try{var s,o,a,n;let i=await (0,r.k_)(r.Pn.AUTH.LOGIN,{method:"POST",body:{email:e,password:t}});if(console.log("\uD83D\uDD0D AUTH DEBUG - API Response:",i),console.log("\uD83D\uDD0D AUTH DEBUG - Response success:",i.success),console.log("\uD83D\uDD0D AUTH DEBUG - Response data:",i.data),console.log("\uD83D\uDD0D AUTH DEBUG - User data:",null===(s=i.data)||void 0===s?void 0:s.user),console.log("\uD83D\uDD0D AUTH DEBUG - User role:",null===(a=i.data)||void 0===a?void 0:null===(o=a.user)||void 0===o?void 0:o.role),!i.success||!i.data||!i.data.success)return{success:!1,error:(null===(n=i.data)||void 0===n?void 0:n.error)||i.error||"Login failed"};{let e="token_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),s={...i.data.user,password:t};return l(e,s),c(i.data.user),g(e),p(!0),console.log("✅ AUTH DEBUG - User set in context:",i.data.user),console.log("✅ AUTH DEBUG - Auth state updated, isAuthenticated: true"),{success:!0,user:i.data.user,token:e}}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Login failed"}}finally{h(!1)}},y=async e=>{try{let t=await (0,r.k_)(r.Pn.AUTH.CHECK_EMAIL,{method:"POST",body:{email:e}});if(console.log("\uD83D\uDD0D EMAIL CHECK DEBUG - Raw response:",t),console.log("\uD83D\uDD0D EMAIL CHECK DEBUG - Response success:",t.success),console.log("\uD83D\uDD0D EMAIL CHECK DEBUG - Response data:",t.data),!t.success||!t.data)return{success:!1,exists:!1,error:t.error||"Check failed"};{let e=t.data;if(console.log("\uD83D\uDD0D EMAIL CHECK DEBUG - Email allowed:",e.allowed),console.log("\uD83D\uDD0D EMAIL CHECK DEBUG - Account exists:",e.account_exists),e.allowed)return{success:!0,exists:e.account_exists||!1,name:e.name,role:e.role};return{success:!1,exists:!1,error:"Email not pre-approved for registration"}}}catch(e){return console.error("\uD83D\uDD0D EMAIL CHECK DEBUG - Exception:",e),{success:!1,exists:!1,error:e instanceof Error?e.message:"Check failed"}}},E=async e=>{try{var t;let s=await (0,r.k_)(r.Pn.AUTH.CREATE_ACCOUNT,{method:"POST",body:e});if(s.success&&s.data&&s.data.success)return await x(e.email,e.password);return{success:!1,error:(null===(t=s.data)||void 0===t?void 0:t.error)||s.error||"Registration failed"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Registration failed"}}};return(0,o.jsx)(n.Provider,{value:{user:s,isLoading:m,isAuthenticated:D,authToken:f,login:x,logout:()=>{u(),c(null),g(null),p(!1),window.location.href="/"},checkEmailAvailability:y,register:E,checkAdminAccess:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return D?(null==s?void 0:s.role)==="admin"||(e&&d("You need to be an admin to access this page!"),!1):(e&&d("You need to be logged in as an admin to access this page!"),!1)},showPopup:d},children:t})};t.default=n},9407:function(e,t,s){"use strict";s.d(t,{Pn:function(){return u},Sv:function(){return i},WA:function(){return a},cT:function(){return l},k6:function(){return c},k_:function(){return n}});let o="http://127.0.0.1:8000",a=()=>{let e=localStorage.getItem("munAuth");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},r=e=>{let t=e||a();return t?{Authorization:"".concat(t.email,":").concat(t.password)}:{}},n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let s="".concat(o).concat(e);console.log("\uD83C\uDF10 API CALL DEBUG - URL:",s),console.log("\uD83C\uDF10 API CALL DEBUG - API_BASE_URL:",o),console.log("\uD83C\uDF10 API CALL DEBUG - endpoint:",e),console.log("\uD83C\uDF10 API CALL DEBUG - Options:",t);let a={headers:{"Content-Type":"application/json",...t.headers},...t};a.body&&"object"==typeof a.body&&(a.body=JSON.stringify(a.body),console.log("\uD83C\uDF10 API CALL DEBUG - Stringified body:",a.body)),console.log("\uD83C\uDF10 API CALL DEBUG - Making fetch request to:",s);let r=await fetch(s,a);if(console.log("\uD83C\uDF10 API CALL DEBUG - Response status:",r.status),console.log("\uD83C\uDF10 API CALL DEBUG - Response ok:",r.ok),!r.ok){let e=await r.text();return console.log("\uD83C\uDF10 API CALL DEBUG - Error text:",e),{success:!1,error:e||"HTTP ".concat(r.status,": ").concat(r.statusText)}}let n=await r.json();console.log("\uD83C\uDF10 API CALL DEBUG - Raw response data:",n);let c={success:!0,data:n};return console.log("\uD83C\uDF10 API CALL DEBUG - Final result:",c),c}catch(e){return console.log("\uD83C\uDF10 API CALL DEBUG - Catch error:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}},c=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=r();return n(e,{...t,headers:{"Content-Type":"application/json",...s,...t.headers}})},l=async(e,t)=>{try{let s=r(),a="".concat(o).concat(e),n=await fetch(a,{method:"POST",headers:{...s},body:t});if(!n.ok){let e=await n.text();return{success:!1,error:e||"HTTP ".concat(n.status,": ").concat(n.statusText)}}let c=await n.json();return{success:!0,data:c}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Upload failed"}}},i=async(e,t)=>{try{let s=r(),a="".concat(o).concat(e),n=await fetch(a,{headers:s});if(n.ok){let e=await n.blob(),s=window.URL.createObjectURL(e),o=document.createElement("a");o.href=s,o.download=t,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(s),document.body.removeChild(o)}else throw Error("Download failed")}catch(e){throw console.error("Download error:",e),e}},u={AUTH:{CHECK_EMAIL:"/api/auth/check-email",CREATE_ACCOUNT:"/api/auth/create-account",LOGIN:"/api/auth/login"},BLOGS:{LIST:"/api/blogs",GET:e=>"/api/blogs/".concat(e),CREATE:"/api/blogs",UPDATE:e=>"/api/blogs/".concat(e),DELETE:e=>"/api/blogs/".concat(e)},RESOURCES:{LIST:"/api/resources",UPLOAD:"/api/admin/resources/upload",DOWNLOAD:e=>"/api/resources/".concat(e,"/download"),DELETE:e=>"/api/resources/".concat(e)},ADMIN:{DASHBOARD_STATS:"/api/admin/dashboard/stats",MEMBERS:"/api/admin/members",MEMBER_UPDATE:e=>"/api/admin/members/".concat(e),MEMBER_DELETE:e=>"/api/admin/members/".concat(e),ADD_EMAIL:"/api/admin/members/add-email",AUTHORS:"/api/admin/authors",CREATE_AUTHOR:"/api/admin/authors"},HEALTH:"/health"}},4033:function(e,t,s){e.exports=s(5313)}},function(e){e.O(0,[921,971,938,744],function(){return e(e.s=5122)}),_N_E=e.O()}]);