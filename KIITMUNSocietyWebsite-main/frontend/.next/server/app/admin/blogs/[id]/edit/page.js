(()=>{var e={};e.id=191,e.ids=[191],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},603:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var a=s(482),r=s(9108),i=s(2563),n=s.n(i),l=s(8300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["admin",{children:["blogs",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4393)),"C:\\KIITMUNSocietyWebsite-main\\frontend\\src\\app\\admin\\blogs\\[id]\\edit\\page.jsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5615)),"C:\\KIITMUNSocietyWebsite-main\\frontend\\src\\app\\admin\\layout.js"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,6016)),"C:\\KIITMUNSocietyWebsite-main\\frontend\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\KIITMUNSocietyWebsite-main\\frontend\\src\\app\\admin\\blogs\\[id]\\edit\\page.jsx"],m="/admin/blogs/[id]/edit/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/blogs/[id]/edit/page",pathname:"/admin/blogs/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},387:(e,t,s)=>{Promise.resolve().then(s.bind(s,8290))},8290:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(2295),r=s(447),i=s(2465),n=s(3109),l=s(3083),o=s(3729),d=s(3024),c=s(4513),m=s(7121),x=s(5794),p=s(16),h=s(3380),u=s(4020),g=s(2254);let b=()=>{let{user:e}=(0,l.useAuth)(),t=(0,g.useRouter)(),s=(0,g.useParams)().id,[b,j]=(0,o.useState)(null),[y,N]=(0,o.useState)({title:"",content:"",competition_date:"",image1:null,image2:null}),[f,v]=(0,o.useState)(!0),[w,_]=(0,o.useState)(!1),[P,k]=(0,o.useState)(""),[C,I]=(0,o.useState)({image1:null,image2:null});(0,o.useEffect)(()=>{s&&S()},[s]);let S=async()=>{try{let e=await (0,u.k_)(u.Pn.BLOGS.GET(parseInt(s)));if(e.success&&e.data){let t=e.data;j(t),N({title:t.title,content:t.content,competition_date:t.competition_date?t.competition_date.split("T")[0]:"",image1:null,image2:null}),I({image1:t.image1_path?`http://127.0.0.1:8000/uploads/images/${t.image1_path}`:null,image2:t.image2_path?`http://127.0.0.1:8000/uploads/images/${t.image2_path}`:null})}else k("Failed to load blog post")}catch(e){k("Failed to load blog post"),console.error("Error fetching blog:",e)}finally{v(!1)}},B=e=>{let{name:t,value:s}=e.target;N(e=>({...e,[t]:s}))},F=(e,t)=>{let s=e.target.files?.[0];if(s){if(!s.type.startsWith("image/")){alert("Please select an image file");return}if(s.size>10485760){alert("Image size should be less than 10MB");return}N(e=>({...e,[t]:s}));let e=new FileReader;e.onload=e=>{I(s=>({...s,[t]:e.target?.result}))},e.readAsDataURL(s)}},Z=e=>{N(t=>({...t,[e]:null})),I(t=>({...t,[e]:null}))},q=async e=>{e.preventDefault(),_(!0),k("");try{let e=new FormData;y.title!==b?.title&&e.append("title",y.title),y.content!==b?.content&&e.append("content",y.content);let a=b?.competition_date?b.competition_date.split("T")[0]:"";y.competition_date!==a&&e.append("competition_date",y.competition_date),y.image1&&e.append("image1",y.image1),y.image2&&e.append("image2",y.image2);let r=await (0,u.cT)(u.Pn.BLOGS.UPDATE(parseInt(s)),e);r.success?t.push("/admin?tab=blogs"):k(r.error||"Failed to update blog post")}catch(e){k("Failed to update blog post. Please try again."),console.error("Blog update error:",e)}finally{_(!1)}};return e?.role!=="admin"?a.jsx(r.Z,{children:a.jsx("div",{className:"min-h-screen bg-secondary-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-secondary-700",children:"Only administrators can edit blog posts."})]})})}):f?a.jsx(r.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-secondary-50",children:[a.jsx(i.default,{}),a.jsx("main",{className:"pt-24 pb-16",children:a.jsx("div",{className:"container-custom max-w-4xl",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),a.jsx("p",{className:"mt-4 text-secondary-600",children:"Loading blog post..."})]})})}),a.jsx(n.default,{})]})}):b?a.jsx(r.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-secondary-50",children:[a.jsx(i.default,{}),a.jsx("main",{className:"pt-24 pb-16",children:(0,a.jsxs)("div",{className:"container-custom max-w-4xl",children:[a.jsx("div",{className:"flex items-center justify-between mb-8",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>t.back(),className:"btn-ghost border border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white flex items-center",children:[a.jsx(d.Z,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-serif font-bold text-secondary-900",children:"Edit Blog Post"}),(0,a.jsxs)("p",{className:"text-secondary-600",children:["Updating: ",b.title]})]})]})}),(0,a.jsxs)("div",{className:"card",children:[P&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(c.Z,{className:"w-5 h-5 text-red-600"})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-red-800",children:P})})]})}),(0,a.jsxs)("form",{onSubmit:q,className:"space-y-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-secondary-900 flex items-center",children:[a.jsx(m.Z,{className:"w-5 h-5 mr-2"}),"Blog Information"]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-secondary-700 mb-2",children:"Blog Title *"}),a.jsx("input",{type:"text",id:"title",name:"title",value:y.title,onChange:B,required:!0,className:"input-field",placeholder:"Enter an engaging blog title..."})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"competition_date",className:"block text-sm font-medium text-secondary-700 mb-2",children:"Competition Date"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-secondary-400"}),a.jsx("input",{type:"date",id:"competition_date",name:"competition_date",value:y.competition_date,onChange:B,className:"input-field pl-10"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-secondary-700 mb-2",children:"Blog Content *"}),a.jsx("textarea",{id:"content",name:"content",value:y.content,onChange:B,required:!0,rows:12,className:"input-field resize-y",placeholder:"Write your blog content here..."}),(0,a.jsxs)("p",{className:"text-sm text-secondary-500 mt-1",children:[y.content.length," characters"]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-secondary-900 flex items-center",children:[a.jsx(p.Z,{className:"w-5 h-5 mr-2"}),"Blog Images"]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"Primary Image"}),C.image1?(0,a.jsxs)("div",{className:"relative",children:[a.jsx("img",{src:C.image1,alt:"Preview 1",className:"w-full h-48 object-cover rounded-lg border border-secondary-200"}),a.jsx("button",{type:"button",onClick:()=>Z("image1"),className:"absolute top-2 right-2 bg-red-600 text-white rounded-full p-1 hover:bg-red-700 transition-colors",children:a.jsx(c.Z,{className:"w-4 h-4"})})]}):(0,a.jsxs)("label",{className:"cursor-pointer",children:[(0,a.jsxs)("div",{className:"w-full h-48 border-2 border-dashed border-secondary-300 rounded-lg flex flex-col items-center justify-center text-secondary-500 hover:border-primary-400 hover:text-primary-600 transition-colors",children:[a.jsx(h.Z,{className:"w-8 h-8 mb-2"}),a.jsx("span",{children:"Click to upload new image"}),a.jsx("span",{className:"text-xs",children:"PNG, JPG, GIF up to 10MB"})]}),a.jsx("input",{type:"file",accept:"image/*",onChange:e=>F(e,"image1"),className:"hidden"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-secondary-700 mb-2",children:"Secondary Image"}),C.image2?(0,a.jsxs)("div",{className:"relative",children:[a.jsx("img",{src:C.image2,alt:"Preview 2",className:"w-full h-48 object-cover rounded-lg border border-secondary-200"}),a.jsx("button",{type:"button",onClick:()=>Z("image2"),className:"absolute top-2 right-2 bg-red-600 text-white rounded-full p-1 hover:bg-red-700 transition-colors",children:a.jsx(c.Z,{className:"w-4 h-4"})})]}):(0,a.jsxs)("label",{className:"cursor-pointer",children:[(0,a.jsxs)("div",{className:"w-full h-48 border-2 border-dashed border-secondary-300 rounded-lg flex flex-col items-center justify-center text-secondary-500 hover:border-primary-400 hover:text-primary-600 transition-colors",children:[a.jsx(h.Z,{className:"w-8 h-8 mb-2"}),a.jsx("span",{children:"Click to upload new image"}),a.jsx("span",{className:"text-xs",children:"PNG, JPG, GIF up to 10MB"})]}),a.jsx("input",{type:"file",accept:"image/*",onChange:e=>F(e,"image2"),className:"hidden"})]})]})]}),a.jsx("p",{className:"text-sm text-secondary-600",children:"Upload new images to replace existing ones, or leave empty to keep current images."})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-secondary-200",children:[a.jsx("button",{type:"button",onClick:()=>t.back(),className:"btn-ghost border border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white",disabled:w,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:w||!y.title||!y.content,className:"btn-ghost border border-primary-600 text-primary-600 hover:bg-primary-600 hover:text-white flex items-center",children:w?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Updating Blog..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Update Blog Post"]})})]})]})]})]})}),a.jsx(n.default,{})]})}):a.jsx(r.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-secondary-50",children:[a.jsx(i.default,{}),a.jsx("main",{className:"pt-24 pb-16",children:a.jsx("div",{className:"container-custom max-w-4xl",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Blog Not Found"}),a.jsx("p",{className:"text-secondary-700 mb-6",children:"The blog post you're trying to edit doesn't exist."}),a.jsx("button",{onClick:()=>t.push("/admin"),className:"btn-ghost border border-primary-600 text-primary-600 hover:bg-primary-600 hover:text-white",children:"Return to Admin Dashboard"})]})})}),a.jsx(n.default,{})]})})}},4393:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});let a=(0,s(6843).createProxy)(String.raw`C:\KIITMUNSocietyWebsite-main\frontend\src\app\admin\blogs\[id]\edit\page.jsx`),{__esModule:r,$$typeof:i}=a,n=a.default}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[470,945,303,752,900,818,707,651],()=>s(603));module.exports=a})();